<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Servicio que devuelve JSON</title>
</head>

<body>

    <h1>Servicio que devuelve JSON</h1>

    <p><button onclick="resultado()">Resultado</button></p>

    <script type="module">
        import { exportaAHtml } from "./lib/js/exportaAHtml.js";
        import { consumeJson } from "./lib/js/consumeJson.js";
        import { muestraError } from "./lib/js/muestraError.js";

        async function resultado() {
            try {
                const respuesta = await consumeJson("srv/devuelve.php");
                const body = respuesta.body;
                alert(`Nombre: ${body.nombre}
Género: ${body.genero}
Álbum más vendido: ${body.album_mas_vendido}`);
            } catch (error) {
                muestraError(error);
            }
        }

        exportaAHtml(resultado);
    </script>

</body>

</html>
